<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Game</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption empty">&nbsp;</span><ul class="links" id="page-menu"><li><a href="src/Game.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Game</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Declarative representation of generalized Connect Four game for two players.
Can represent any game as series of applications of appropiate functions.
Game can be parametrized with number of rows, columns, and line length needed to win. 
Exported functions allow to create game, play it (check available moves and play moves) and check who wins. </p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:BoardSetting">BoardSetting</a> = <a href="#v:BoardSetting">BoardSetting</a> {<ul class="subs"><li><a href="#v:nRows">nRows</a> :: Int</li><li><a href="#v:nColumns">nColumns</a> :: Int</li><li><a href="#v:lineToWin">lineToWin</a> :: Int</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Player">Player</a><ul class="subs"><li>= <a href="#v:Red">Red</a></li><li>| <a href="#v:Blue">Blue</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:BoardState">BoardState</a> = Seq (Maybe <a href="Game.html#t:Player" title="Game">Player</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:GameState">GameState</a> = <a href="#v:GameState">GameState</a> {<ul class="subs"><li><a href="#v:boardSetting">boardSetting</a> :: <a href="Game.html#t:BoardSetting" title="Game">BoardSetting</a></li><li><a href="#v:boardState">boardState</a> :: <a href="Game.html#t:BoardState" title="Game">BoardState</a></li><li><a href="#v:player">player</a> :: <a href="Game.html#t:Player" title="Game">Player</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Move">Move</a> = Int</li><li class="src short"><a href="#v:newGame">newGame</a> :: <a href="Game.html#t:BoardSetting" title="Game">BoardSetting</a> -&gt; <a href="Game.html#t:GameState" title="Game">GameState</a></li><li class="src short"><a href="#v:doesPlayerWin">doesPlayerWin</a> :: <a href="Game.html#t:GameState" title="Game">GameState</a> -&gt; <a href="Game.html#t:Player" title="Game">Player</a> -&gt; Bool</li><li class="src short"><a href="#v:whoWins">whoWins</a> :: <a href="Game.html#t:GameState" title="Game">GameState</a> -&gt; Maybe <a href="Game.html#t:Player" title="Game">Player</a></li><li class="src short"><a href="#v:availableMoves">availableMoves</a> :: <a href="Game.html#t:GameState" title="Game">GameState</a> -&gt; [<a href="Game.html#t:Move" title="Game">Move</a>]</li><li class="src short"><a href="#v:applyMove">applyMove</a> :: <a href="Game.html#t:GameState" title="Game">GameState</a> -&gt; <a href="Game.html#t:Move" title="Game">Move</a> -&gt; Maybe <a href="Game.html#t:GameState" title="Game">GameState</a></li><li class="src short"><a href="#v:oponent">oponent</a> :: <a href="Game.html#t:Player" title="Game">Player</a> -&gt; <a href="Game.html#t:Player" title="Game">Player</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BoardSetting" class="def">BoardSetting</a> <a href="src/Game.html#BoardSetting" class="link">Source</a> <a href="#t:BoardSetting" class="selflink">#</a></p><div class="doc"><p>Parameters of the game.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:BoardSetting" class="def">BoardSetting</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:nRows" class="def">nRows</a> :: Int</dfn><div class="doc"><p>Number of rows
   In classic Connect Four equal to 6</p></div></li><li><dfn class="src"><a id="v:nColumns" class="def">nColumns</a> :: Int</dfn><div class="doc"><p>Number of columns.
   In classic Connect Four equal to 7</p></div></li><li><dfn class="src"><a id="v:lineToWin" class="def">lineToWin</a> :: Int</dfn><div class="doc"><p>Number of tokens placed consecutively either in horizontal, vertical, diagonal or antidiagonal line needed to win
   In classic Connect Four equal to 4</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Player" class="def">Player</a> <a href="src/Game.html#Player" class="link">Source</a> <a href="#t:Player" class="selflink">#</a></p><div class="doc"><p>Type representing player
   Either Red or Blue</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Red" class="def">Red</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Blue" class="def">Blue</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Player">Instances</h4><details id="i:Player" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Player:Eq:1"></span> Eq <a href="Game.html#t:Player" title="Game">Player</a></span> <a href="src/Game.html#line-46" class="link">Source</a> <a href="#t:Player" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Player:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Game.html">Game</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Game.html#t:Player" title="Game">Player</a> -&gt; <a href="Game.html#t:Player" title="Game">Player</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Game.html#t:Player" title="Game">Player</a> -&gt; <a href="Game.html#t:Player" title="Game">Player</a> -&gt; Bool</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:BoardState" class="def">BoardState</a> = Seq (Maybe <a href="Game.html#t:Player" title="Game">Player</a>) <a href="src/Game.html#BoardState" class="link">Source</a> <a href="#t:BoardState" class="selflink">#</a></p><div class="doc"><p>State of the board of the game.
   Sequence of elements - each of them represents an empty field (<code>Nothing</code>) or a field occupied by a player's token 'Just Player'.
   It is possible for it to store invalid states.
   For game representation to be correct, (length <code><a href="Game.html#t:BoardState" title="Game">BoardState</a></code>) has to be equal m * n, where m = number of rows, n = number of columns.
   Position (i, j) on the board is stored in the (m * i + j)th element of Sequence.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:GameState" class="def">GameState</a> <a href="src/Game.html#GameState" class="link">Source</a> <a href="#t:GameState" class="selflink">#</a></p><div class="doc"><p>State of the game.
   It is possible for it to store invalid states.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:GameState" class="def">GameState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:boardSetting" class="def">boardSetting</a> :: <a href="Game.html#t:BoardSetting" title="Game">BoardSetting</a></dfn><div class="doc"><p>Parameters of the game</p></div></li><li><dfn class="src"><a id="v:boardState" class="def">boardState</a> :: <a href="Game.html#t:BoardState" title="Game">BoardState</a></dfn><div class="doc"><p>State of the board</p></div></li><li><dfn class="src"><a id="v:player" class="def">player</a> :: <a href="Game.html#t:Player" title="Game">Player</a></dfn><div class="doc"><p>Which player turn it is (who will do next move)</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Move" class="def">Move</a> = Int <a href="src/Game.html#Move" class="link">Source</a> <a href="#t:Move" class="selflink">#</a></p><div class="doc"><p>Move in the game. 
   Value i means throwing token into i'th column. 
   Columns are numbered from 0.</p></div></div><div class="top"><p class="src"><a id="v:newGame" class="def">newGame</a> :: <a href="Game.html#t:BoardSetting" title="Game">BoardSetting</a> -&gt; <a href="Game.html#t:GameState" title="Game">GameState</a> <a href="src/Game.html#newGame" class="link">Source</a> <a href="#v:newGame" class="selflink">#</a></p><div class="doc"><p>Creates new game with empty board for provided parameters.
   Red player always has first move.</p></div></div><div class="top"><p class="src"><a id="v:doesPlayerWin" class="def">doesPlayerWin</a> :: <a href="Game.html#t:GameState" title="Game">GameState</a> -&gt; <a href="Game.html#t:Player" title="Game">Player</a> -&gt; Bool <a href="src/Game.html#doesPlayerWin" class="link">Source</a> <a href="#v:doesPlayerWin" class="selflink">#</a></p><div class="doc"><p>Returns whether given player has a winning line
   O((2(m-k)(n-k) + m(n-k) + n(m-k)) * k * log(m*n))</p></div></div><div class="top"><p class="src"><a id="v:whoWins" class="def">whoWins</a> :: <a href="Game.html#t:GameState" title="Game">GameState</a> -&gt; Maybe <a href="Game.html#t:Player" title="Game">Player</a> <a href="src/Game.html#whoWins" class="link">Source</a> <a href="#v:whoWins" class="selflink">#</a></p><div class="doc"><p>Returns one of the winners of a given game.
   <code>Nothing</code> if there is no winnner yet
   'Just Player' - one of the players having winning position
   For performance purposes doesn't check if game state is correct.
   If game wasn't played correctly, there can be more than one winner but always only one of them is returned.
   O(2 * (2(m-k)(n-k) + m(n-k) + n(m-k)) * k * log(m*n))</p></div></div><div class="top"><p class="src"><a id="v:availableMoves" class="def">availableMoves</a> :: <a href="Game.html#t:GameState" title="Game">GameState</a> -&gt; [<a href="Game.html#t:Move" title="Game">Move</a>] <a href="src/Game.html#availableMoves" class="link">Source</a> <a href="#v:availableMoves" class="selflink">#</a></p><div class="doc"><p>Returns list of available moves for a given game.
   Available moves are columns that have their top field empty.
   For performance purposes doesn't check correctness of the game.
   O(n * log(m + n))</p></div></div><div class="top"><p class="src"><a id="v:applyMove" class="def">applyMove</a> <a href="src/Game.html#applyMove" class="link">Source</a> <a href="#v:applyMove" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Game.html#t:GameState" title="Game">GameState</a></td><td class="doc"><p>A game state. Correctness is not checked for performance reasons.</p></td></tr><tr><td class="src">-&gt; <a href="Game.html#t:Move" title="Game">Move</a></td><td class="doc"><p>Number of column in which the token will be placed.</p></td></tr><tr><td class="src">-&gt; Maybe <a href="Game.html#t:GameState" title="Game">GameState</a></td><td class="doc"><p>If chosen column has at least one free place, then 'Just GameState' - game state with the move played. 
   Token will be placed on the lowest free place int the column. Token's color will corespond to the player whose turn it was.
   If chosen column was full, or there was not enough columns, then <code>Nothing</code>.</p></td></tr></table></div><div class="doc"><p>For a given game state and a move plays that move and returns resulting game state if move was possible.
   O (m + n * log(m))</p></div></div><div class="top"><p class="src"><a id="v:oponent" class="def">oponent</a> :: <a href="Game.html#t:Player" title="Game">Player</a> -&gt; <a href="Game.html#t:Player" title="Game">Player</a> <a href="src/Game.html#oponent" class="link">Source</a> <a href="#v:oponent" class="selflink">#</a></p><div class="doc"><p>For given player a player that will move next.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.25.1</p></div></body></html>